        <div class="card-body">
          <form action="/transactions/insert" method="POST" 
                hx-post="/transactions/insert" 
			hx-swap="outerHTML"
          onsubmit="stripCommas()">

            <!-- Date -->
            <div class="mb-3 row">
              <label for="fdate" class="col-sm-3 col-form-label">Date</label>
              <div class="col-sm-9">
                <input type="date" class="form-control" id="fdate" name="date" required>
              </div>
            </div>

            <!-- Income/Expense -->
            <fieldset class="mb-3 row">
              <legend class="col-form-label col-sm-3 pt-0">Type</legend>
              <div class="col-sm-9">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" 
			name="in_or_exp" id="credit" value="Income" 
			hx-include="[name='in_or_exp']:checked"
			hx-trigger="change, load from:body"
			hx-post="/get_category" 
			hx-swap="innerHTML"
			hx-target = "#dropdown_category"
  			onchange="console.log('Income radio changed')" checked>          
		<label class="form-check-label" for="credit">Income</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" 
			name="in_or_exp"
			id="debit" 
			value="Expense" 
			hx-include="[name='in_or_exp']:checked"
			hx-trigger="change"
			hx-post="/get_category" 
			hx-swap="innerHTML"
  			onchange="console.log('Income radio changed')"
			hx-target="#dropdown_category">
                  <label class="form-check-label" for="debit">Expense</label>
                </div>
              </div>
            </fieldset>

            <!-- Amount -->
            <div class="mb-3 row">
              <label for="famount" class="col-sm-3 col-form-label">Amount</label>
              <div class="col-sm-9">
                <input type="text" class="form-control" id="famount" name="amount" oninput="formatNumber(this)" required>
              </div>
            </div>

            <!-- Category -->
            <div class="mb-3 row">
              <label for="fcategory" class="col-sm-3 col-form-label">Category</label>
              <div class="col-sm-9" id="dropdown_category"
                    <select name="category" id="category" required>
                        <option value="">-- Loading... --</option>
                    </select>
              </div>
            </div>

            <!-- Comments -->
            <div class="mb-3 row">
              <label for="fcomments" class="col-sm-3 col-form-label">Comments</label>
              <div class="col-sm-9">
                <textarea class="form-control" id="fcomments" name="comments" rows="3"></textarea>
              </div>
            </div>

            <!-- Submit -->
            <div class="text-end">
              <button type="submit" class="btn btn-success px-4">Submit</button>
            </div>

          </form>
            <script>
            function formatNumber(input){
                // Remove everything except digits and dot
                let value = input.value.replace(/[^\d.]/g, '');

                // Split integer and decimal parts
                let parts = value.split(".");
                let integerPart = parts[0];
                // If decimal exists or input ends with dot, preserve it
                let decimalPart = parts[1] !== undefined ? "." + parts[1] : (value.endsWith(".") ? "." : "");

                // Format only integer part with Indian commas
                if (integerPart) {
                    integerPart = Number(integerPart).toLocaleString('en-IN');
                }

                // Recombine
                input.value = integerPart + decimalPart;
            }

            function stripCommas(){
              let input = document.getElementById("famount");
              input.value = Number(input.value.replace(/,/g,''));
            }
            </script>
      </div>
    </div>
  </div>
</div>
